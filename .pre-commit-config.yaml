# ğŸ˜ .pre-commit-config.yaml
# Harold's Local Quality Gates (No Cloud CI/CD)
#
# Install: pip install pre-commit && pre-commit install
# Run manually: pre-commit run --all-files

repos:
  # ğŸ˜ Ruff: Harold's all-in-one formatter and linter
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.7.0
    hooks:
      # Format code (auto-fix)
      - id: ruff-format
        name: "ğŸ˜ Ruff Format"
        
      # Lint (auto-fix when possible)
      - id: ruff
        name: "ğŸ˜ Ruff Lint"
        args: [--fix, --exit-non-zero-on-fix]

  # ğŸ˜ MyPy: Type checking (Harold's type safety paranoia)
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.13.0
    hooks:
      - id: mypy
        name: "ğŸ˜ MyPy Type Check"
        args: [--strict, --config-file=pyproject.toml]
        additional_dependencies:
          - pydantic>=2.9.0
          - cryptography>=43.0.0
          - httpx>=0.27.0
          - trio>=0.27.0

  # ğŸ˜ Bandit: Security linting (Dark Harold's paranoia)
  - repo: https://github.com/PyCQA/bandit
    rev: 1.7.10
    hooks:
      - id: bandit
        name: "ğŸ˜ Bandit Security Scan"
        args: [-c, pyproject.toml, -r, src/]

  # ğŸ˜ gitleaks: Secret scanning (no secrets shall pass)
  - repo: https://github.com/gitleaks/gitleaks
    rev: v8.18.0
    hooks:
      - id: gitleaks
        name: "ğŸ˜ Gitleaks Secret Scan"

  # ğŸ˜ Standard pre-commit hooks
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.6.0
    hooks:
      - id: trailing-whitespace
        name: "ğŸ˜ Trim Trailing Whitespace"
      - id: end-of-file-fixer
        name: "ğŸ˜ Fix EOF"
      - id: check-yaml
        name: "ğŸ˜ Check YAML"
      - id: check-toml
        name: "ğŸ˜ Check TOML"
      - id: check-json
        name: "ğŸ˜ Check JSON"
      - id: check-added-large-files
        name: "ğŸ˜ Check Large Files"
        args: [--maxkb=1000]
      - id: check-merge-conflict
        name: "ğŸ˜ Check Merge Conflicts"
      - id: debug-statements
        name: "ğŸ˜ Debug Statements (Harold forgot one)"

  # ğŸ˜ Interrogate: Docstring coverage
  - repo: https://github.com/econchick/interrogate
    rev: 1.7.0
    hooks:
      - id: interrogate
        name: "ğŸ˜ Interrogate Docstrings"
        args: [-vv, --fail-under=70, src/]

# ğŸ˜ Harold's Commentary:
# "These hooks will catch issues before they reach the repo.
# Dark Harold still expects things to break in production." ğŸ˜
